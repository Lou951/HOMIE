<%= link_to new_list_user_list_path(@list), class:"text-decoration-none picture" do %>
<button>Add User To List</button>
<% end %>

<div class="search-bar" data-controller="search-bar">
  <%= form_with url: list_list_products_path(:list_id), method: :get, class: "d-flex my-3", data: {search_bar_target: "form", action: "submit->search-bar#submitting" } do %>
    <%= text_field_tag :query,
      params[:query],
      class: "form-control",
      data: { action: "keyup->search-bar#typing"},
      placeholder: "Add a product"
    %>
    <%= submit_tag "Search"%>
    <%= @results %>
  <% end %>
</div>

<div class="container">
  <%= simple_form_for [@list, @list_product] do |f| %>
    <%= f.input :frequency %>
    <%= f.association :product, collection: Product.order('item ASC'), input_html: { class: 'select2' }  %>
    <%= f.submit :submit %>
  <% end %>
</div>
<ul>
  <% @list_products.each do |product| %>
  <li>
  <%= product.product.item %>
  <br>
  Running out in: <%= product.frequency %> days
  <%= link_to new_list_product_purchase_path(product), class:"text-decoration-none picture" do %>
  <button>Purchase</button>
  <% end %>
  </li>
  <% end %>
</ul>

<div class="mt-4">
      <%= link_to "Delete List", list_path(@list), data: {turbo_method: :delete, turbo_confirm: "Do you really want to delete this list?"}%>
  </div>
<ul>
  <% @list.user_lists.each do |user_list| %>
  <li>
    <%= user_list.user.email %>
    <%= link_to "Remove Person From List", user_list_path(user_list), data: {turbo_method: :delete, turbo_confirm: "Do you really want to delete this user from the list?"}%>
    <% end %>
  </li>
</ul>
